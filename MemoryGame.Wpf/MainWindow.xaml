<Window x:Class="MemoryGame.Wpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Memory" Width="800" Height="600">
    <DockPanel Margin="12">
        <!-- topbar start + settings -->
        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="0,0,0,8">
            <TextBlock Text="Paren:" VerticalAlignment="Center"/>
            <TextBox x:Name="PairCountBox" Width="50" Margin="6,0" Text="5"/>
            <Button Content="Nieuw spel"
                    Margin="8,0"
                    Command="{Binding StartCommand}"
                    CommandParameter="{Binding Text, ElementName=PairCountBox}"/>
            <TextBlock Text="Tijd:" Margin="16,0,0,0" VerticalAlignment="Center"/>
            <TextBlock Text="{Binding ElapsedText}" Margin="6,0" VerticalAlignment="Center"/>
            <TextBlock Text="Pogingen:" Margin="16,0,0,0" VerticalAlignment="Center"/>
            <TextBlock Text="{Binding Attempts}" Margin="6,0" VerticalAlignment="Center"/>
        </StackPanel>

        <!-- Kaartenraster -->
        <ScrollViewer>
            <ItemsControl ItemsSource="{Binding Cards}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Button Width="80" Height="100" Margin="6"
                                Command="{Binding DataContext.FlipCardCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                CommandParameter="{Binding Id}">
                            <TextBlock>
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <!-- default = closed = * -->
                                        <Setter Property="Text" Value="*" />
                                        <!-- open = value -->
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding IsFaceUp}" Value="True">
                                                <Setter Property="Text" Value="{Binding Value}" />
                                            </DataTrigger>
                                            <!-- if match is found, stay visible -->
                                            <DataTrigger Binding="{Binding IsMatched}" Value="True">
                                                <Setter Property="Text" Value="{Binding Value}" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                        </Button>

                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </DockPanel>
</Window>
